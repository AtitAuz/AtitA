<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>AtitA - –ö–∞—Ñ–µ –ú–æ—Ä–æ–∂–µ–Ω–æ–≥–æ</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="apple-touch-icon" sizes="180x180" href="/AtitA/images/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/AtitA/images/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/AtitA/images/favicon-16x16.png" />
  <link rel="icon" type="image/png" sizes="96x96" href="/AtitA/images/favicon-96x96.png" />
  <link rel="manifest" href="/AtitA/site.webmanifest" />

  <style>
    #profileBtn {
      position: fixed;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      cursor: pointer;
      z-index: 9999;
      display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
      align-items: center;
      gap: 8px;
      color: white;
      font-weight: bold;
      font-size: 16px;
    }

    #profileBtn img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
    }
  </style>
</head>
<body>

<!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
<button id="profileBtn">
  <img src="images/default-avatar.png" id="header-avatar" alt="–ü—Ä–æ—Ñ–∏–ª—å" />
  <span id="profileName" style="margin-left: 8px; color: white; font-weight: bold;"></span>
</button>

<header>
  <div class="logo">
    <img src="images/logo.png" alt="AtitA Logo" />
  </div>
  <div class="hamburger" onclick="toggleMenu()">‚ò∞</div>
</header>

<nav class="navbar">
  <a href="index.html" class="active" data-i18n="home">–ì–ª–∞–≤–Ω–∞—è</a>
  <a href="menu.html" data-i18n="menu">–ú–µ–Ω—é</a>
  <a href="about.html" data-i18n="about">–û –Ω–∞—Å</a>
  <a href="login.html" data-i18n="login" id="loginLink">–í—Ö–æ–¥</a>
  <a href="register.html" data-i18n="register" id="registerLink">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
</nav>

<!-- –ö–Ω–æ–ø–∫–∏ —è–∑—ã–∫–∞ -->
<div class="lang-switcher">
  <button onclick="setLanguage('ru')">–†–£–°</button>
  <button onclick="setLanguage('uz')">O‚ÄòZB</button>
</div>

<main>
  <section id="slider">
    <h2 data-i18n="popular_flavors">üçß –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–∫—É—Å—ã</h2>
    <div class="slider-container">
      <button class="slider-btn left" onclick="prevSlide()">&#10094;</button>
      <div class="slider">
        <div class="slide">
          <img src="images/icecream chocolade.jpg" alt="–®–æ–∫–æ–ª–∞–¥–Ω–æ–µ –º–æ—Ä–æ–∂–µ–Ω–æ–µ" width="300" />
          <p data-translate="slide_chocolate">–®–æ–∫–æ–ª–∞–¥</p>
        </div>
        <div class="slide">
          <img src="images/icecream crezm brule.jpg" alt="–ö—Ä–µ–º –ë—Ä—é–ª–µ" width="300" />
          <p data-translate="slide_creme_brulee">–ö—Ä–µ–º –ë—Ä—é–ª–µ</p>
        </div>
        <div class="slide">
          <img src="images/icecream oreo.jpg" alt="–û—Ä–µ–æ" width="300" />
          <p data-translate="slide_oreo">–û—Ä–µ–æ</p>
        </div>
        <div class="slide">
          <img src="images/icecream rafaelo.jpg" alt="–†–∞—Ñ–∞—ç–ª–ª–æ" width="300" />
          <p data-translate="slide_rafaello">–†–∞—Ñ–∞—ç–ª–ª–æ</p>
        </div>
      </div>
      <button class="slider-btn right" onclick="nextSlide()">&#10095;</button>
    </div>
  </section>

  <section>
    <h2 data-i18n="welcome_title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AtitA!</h2>
    <p data-i18n="welcome_text">–õ—É—á—à–µ–µ –º–æ—Ä–æ–∂–µ–Ω–æ–µ –≤ –¢–∞—à–∫–µ–Ω—Ç–µ! ‚Äî —Å–≤–µ–∂–µ—Å—Ç—å –∏ –≤–∫—É—Å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!</p>
  </section>
</main>

<footer>
  <p data-i18n="footer">&copy; 2023 AtitA. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
</footer>

<script>
  // –°–ª–∞–π–¥–µ—Ä
  let currentIndex = 0;
  function updateSlider() {
    const slider = document.querySelector('.slider');
    const slideWidth = 320;
    slider.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
  }
  function prevSlide() {
    if (currentIndex > 0) {
      currentIndex--;
      updateSlider();
    }
  }
  function nextSlide() {
    const totalSlides = document.querySelectorAll('.slide').length;
    if (currentIndex < totalSlides - 1) {
      currentIndex++;
      updateSlider();
    }
  }

  // –ü–µ—Ä–µ–≤–æ–¥—ã
  const translations = {
    ru: {
      slide_chocolate: "–®–æ–∫–æ–ª–∞–¥",
      slide_creme_brulee: "–ö—Ä–µ–º –ë—Ä—é–ª–µ",
      slide_oreo: "–û—Ä–µ–æ",
      slide_rafaello: "–†–∞—Ñ–∞—ç–ª–ª–æ",
      home: "–ì–ª–∞–≤–Ω–∞—è",
      menu: "–ú–µ–Ω—é",
      login: "–í—Ö–æ–¥",
      register: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",
      popular_flavors: "üçß –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–∫—É—Å—ã",
      welcome_title: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AtitA!",
      welcome_text: "–õ—É—á—à–µ–µ –º–æ—Ä–æ–∂–µ–Ω–æ–µ –≤ –¢–∞—à–∫–µ–Ω—Ç–µ! ‚Äî —Å–≤–µ–∂–µ—Å—Ç—å –∏ –≤–∫—É—Å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!",
      footer: "&copy; 2023 AtitA. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã."
    },
    uz: {
      slide_chocolate: "Shokolad",
      slide_creme_brulee: "Krem bryule",
      slide_oreo: "Oreo",
      slide_rafaello: "Rafaello",
      home: "Bosh sahifa",
      menu: "Menyu",
      login: "Kirish",
      register: "Ro‚Äòyxatdan o‚Äòtish",
      popular_flavors: "üçß Mashhur ta ºmlar",
      welcome_title: "AtitA ºga xush kelibsiz!",
      welcome_text: "Toshkentdagi eng yaxshi muzqaymoq ‚Äî har kuni yangilik va lazzat!",
      footer: "&copy; 2023 AtitA. Barcha huquqlar himoyalangan."
    }
  };
  function setLanguage(lang) {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
      const key = el.getAttribute('data-i18n');
      if (translations[lang][key]) {
        el.innerHTML = translations[lang][key];
      }
    });
    localStorage.setItem('lang', lang);
  }

  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ –º–µ–Ω—é –í—Ö–æ–¥/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  function updateAuthDisplay() {
    const profileBtn = document.getElementById('profileBtn');
    const loginLink = document.getElementById('loginLink');
    const registerLink = document.getElementById('registerLink');

    const profile = JSON.parse(localStorage.getItem('user_profile'));
    if (profile && profile.name) {
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–æ—Ñ–∏–ª—è –∏ —Å–∫—Ä—ã–≤–∞–µ–º –≤—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
      profileBtn.style.display = 'flex';
      loginLink.style.display = 'none';
      registerLink.style.display = 'none';

      // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä –∏ –∏–º—è
      const avatarEl = document.getElementById('header-avatar');
      const nameEl = document.getElementById('profileName');
      avatarEl.src = profile.avatar || 'images/default-avatar.png';
      nameEl.textContent = profile.name;
    } else {
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω ‚Äî —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–æ—Ñ–∏–ª—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
      profileBtn.style.display = 'none';
      loginLink.style.display = 'inline-block';
      registerLink.style.display = 'inline-block';
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('lang') || 'ru';
    setLanguage(savedLang);
    updateAuthDisplay();
  });

  // –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–æ—Ñ–∏–ª—å
  document.getElementById('profileBtn').addEventListener('click', () => {
    const profileData = localStorage.getItem('user_profile');
    if (profileData) {
      window.location.href = 'profile.html';
    } else {
      alert('–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è.');
    }
  });

  function toggleMenu() {
    const navbar = document.querySelector('.navbar');
    navbar.classList.toggle('mobile-visible');
  }

  // --- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ---
  const isMobile = /Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);

  if (isMobile) {
    console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ");
    document.body.classList.add('mobile');
  } else {
    console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ");
    document.body.classList.add('desktop');
  }
</script>

</body>
</html>
